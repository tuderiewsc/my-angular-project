<!-- content-Start -->
<div class="container">
  <section class="panel_content">
    <h5 class="panelTitle">ويرايش دسته بندي</h5>
    <hr>
    <div class="row">
      <div class="formAdd">
        <form #updateCategory="ngForm" id="updateCategory" action="#" class="form-row p-3 bg-light justify-content-center" method="post"
              novalidate [formGroup]="updateCatForm" (ngSubmit)="update_category(updateCatForm.value, category.id)">

          <div class="alert alert-danger" *ngIf="errorMessage != undefined">
            {{ errorMessage }}
          </div>
          <br>

          <div class="form-group required col-md-4">
            <label class="mainLabel" for="name">نام دسته</label>
            <input class="form-control" type="text" id="name" formControlName="name"
                   value="{{category.name}}"
                   [ngClass]="{'is-invalid': updateCatForm.controls['name'].invalid &&
                  (updateCatForm.controls['name'].dirty || updateCatForm.controls['name'].touched)}">
            <div class="errors" *ngIf="updateCatForm.controls['name'].invalid &&
                  (updateCatForm.controls['name'].dirty || updateCatForm.controls['name'].touched)">
                      <span *ngIf="updateCatForm.controls['name'].errors.required">
                        فيلد نام را تکميل کنيد.
                      </span>
            </div>
          </div>
          <div class="form-group required col-md-4">
            <label class="mainLabel" for="parent_id">مادر دسته</label>
            <select class="form-control" id="parent_id" formControlName="parent_id"
                    [ngClass]="{'is-invalid': updateCatForm.controls['parent_id'].invalid &&
                  (updateCatForm.controls['parent_id'].dirty || updateCatForm.controls['parent_id'].touched)}">
              <option value="0" selected="selected">---</option>
              <option *ngFor="let cat of cats" value="{{ cat.id }}"
                     [selected]="category.parent_id == cat.id" > {{ cat.name }}
              </option>
            </select>
            <div class="errors" *ngIf="updateCatForm.controls['parent_id'].invalid &&
                  (updateCatForm.controls['parent_id'].dirty || updateCatForm.controls['parent_id'].touched)">
                      <span *ngIf="updateCatForm.controls['parent_id'].errors.required">
                        فيلد نام را تکميل کنيد.
                      </span>
            </div>
          </div>
          <div class="form-group my-3 col-12">
            <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored bg-warning w-25"
                    [disabled]="updateCatForm.pristine || updateCatForm.invalid">ويرايش</button>
          </div>
        </form>
      </div>
    </div>
  </section>
</div>
<!-- content-End -->


